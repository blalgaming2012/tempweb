# نظام إدارة الخدمات والعمال

## نظرة عامة
نظام ويب متكامل لإدارة خدمة العملاء والعمال، مبني على تقنيات حديثة مع تركيز على تجربة المستخدم الأنيقة والأمان العالي.

## المميزات الرئيسية

### 1. نظام المصادقة والصلاحيات
- تسجيل دخول آمن بثلاثة أدوار مختلفة:
  - **مدير (Admin)**: صلاحيات كاملة لإدارة النظام
  - **خدمة عملاء (Customer Service)**: إدارة طلبات الخدمة
  - **عامل (Worker)**: عرض وتحديث المهام المخصصة فقط

### 2. لوحة تحكم خدمة العملاء
- عرض وإدارة جميع طلبات الخدمة
- إنشاء طلبات خدمة جديدة
- تعيين العمال للطلبات
- تحديث حالة الطلبات
- تصفية الطلبات حسب الحالة
- عرض إحصائيات شاملة

### 3. لوحة تحكم العمال
- عرض المهام المخصصة للعامل فقط
- تحديث حالة المهام
- إضافة ملاحظات على المهام
- تصفية المهام حسب الحالة
- عرض إحصائيات المهام الشخصية

### 4. لوحة إدارة المستخدمين (للمدير فقط)
- إضافة مستخدمين جدد
- تعديل بيانات المستخدمين
- تغيير أدوار المستخدمين
- حذف المستخدمين
- تصفية المستخدمين حسب الدور

### 5. نظام الثيمات
- دعم الوضع الفاتح والداكن
- تبديل سلس بين الأوضاع
- حفظ تفضيلات المستخدم في localStorage
- تأثير خلفية متحركة (Parallax Effect)

### 6. التصميم والواجهة
- تصميم عصري وأنيق
- دعم كامل للغة العربية (RTL)
- خطوط Cairo و Montserrat
- ألوان متناسقة مع نظام الثيمات
- تصميم متجاوب (Desktop-first)
- انتقالات سلسة وتأثيرات بصرية

## الحسابات التجريبية

### مدير النظام
- **اسم المستخدم**: admin
- **كلمة المرور**: admin123
- **الصلاحيات**: جميع الصلاحيات

### موظف خدمة العملاء
- **اسم المستخدم**: service1
- **كلمة المرور**: service123
- **الصلاحيات**: إدارة طلبات الخدمة

### عامل
- **اسم المستخدم**: worker1
- **كلمة المرور**: worker123
- **الصلاحيات**: عرض وتحديث المهام المخصصة

## البنية التقنية

### التقنيات المستخدمة
- **Frontend Framework**: React 18 + TypeScript
- **Build Tool**: Vite
- **Styling**: Tailwind CSS
- **UI Components**: shadcn/ui
- **Routing**: React Router v6
- **State Management**: React Context API
- **Data Storage**: localStorage (مؤقت - بانتظار Supabase)
- **Icons**: Lucide React

### هيكل المشروع
```
src/
├── components/
│   ├── ui/              # مكونات shadcn/ui
│   ├── common/          # مكونات مشتركة (Header)
│   └── ProtectedRoute.tsx
├── contexts/
│   ├── AuthContext.tsx  # إدارة المصادقة
│   └── ThemeContext.tsx # إدارة الثيمات
├── pages/
│   ├── Login.tsx        # صفحة تسجيل الدخول
│   ├── Dashboard.tsx    # لوحة التحكم الرئيسية
│   ├── ServiceRequests.tsx  # إدارة طلبات الخدمة
│   ├── WorkerTasks.tsx  # مهام العامل
│   └── AdminPanel.tsx   # لوحة إدارة المستخدمين
├── services/
│   └── storage.ts       # خدمات localStorage
├── types/
│   └── index.ts         # تعريفات TypeScript
├── routes.tsx           # تعريف المسارات
└── App.tsx              # المكون الرئيسي
```

## نظام الألوان

### الوضع الفاتح
- **Primary**: Teal/Cyan (186, 100%, 35%)
- **Background**: White (0, 0%, 98%)
- **Card**: White (0, 0%, 100%)

### الوضع الداكن
- **Primary**: Teal/Cyan (186, 100%, 45%)
- **Background**: Dark Blue (210, 25%, 8%)
- **Card**: Dark Blue (210, 25%, 12%)

## حالات الطلبات والمهام

### حالات طلبات الخدمة
- **جديد (new)**: طلب جديد لم يتم معالجته
- **معين (assigned)**: تم تعيين عامل للطلب
- **قيد التنفيذ (in_progress)**: جاري العمل على الطلب
- **مكتمل (completed)**: تم إنجاز الطلب
- **ملغي (cancelled)**: تم إلغاء الطلب

### حالات المهام
- **معلقة (pending)**: مهمة في انتظار البدء
- **قيد التنفيذ (in_progress)**: جاري العمل على المهمة
- **مكتملة (completed)**: تم إنجاز المهمة
- **ملغية (cancelled)**: تم إلغاء المهمة

## الأولويات
- **منخفضة (low)**: أولوية منخفضة
- **متوسطة (medium)**: أولوية متوسطة
- **عالية (high)**: أولوية عالية

## ملاحظات مهمة

### استخدام localStorage
⚠️ **تنبيه**: النظام حالياً يستخدم localStorage لتخزين البيانات بسبب عدم توفر Supabase. هذا حل مؤقت وله القيود التالية:
- البيانات محلية على المتصفح فقط
- لا يوجد مزامنة بين الأجهزة
- البيانات قد تُفقد عند مسح ذاكرة المتصفح
- لا يوجد أمان حقيقي على مستوى قاعدة البيانات

### الترقية إلى Supabase
عند توفر Supabase، يجب:
1. الاتصال بدعم Miaoda لتفعيل Supabase
2. ترحيل البيانات من localStorage إلى Supabase
3. تطبيق Row Level Security (RLS) الحقيقي
4. تحديث خدمات المصادقة لاستخدام Supabase Auth

## الأمان

### الأمان الحالي (localStorage)
- التحقق من الصلاحيات على مستوى الواجهة فقط
- حماية المسارات باستخدام ProtectedRoute
- تصفية البيانات حسب دور المستخدم في الكود

### الأمان المخطط (Supabase)
- Row Level Security (RLS) على مستوى قاعدة البيانات
- العمال يرون مهامهم فقط
- خدمة العملاء ترى جميع الطلبات
- المدير يرى كل شيء

## التطوير المستقبلي

### مميزات مقترحة
- [ ] إشعارات فورية للمهام الجديدة
- [ ] تقارير وإحصائيات متقدمة
- [ ] تصدير البيانات (PDF, Excel)
- [ ] نظام المرفقات للطلبات
- [ ] سجل التغييرات (Audit Log)
- [ ] تقييم أداء العمال
- [ ] جدولة المهام
- [ ] تطبيق الهاتف المحمول

## الدعم والمساعدة
للحصول على الدعم أو تفعيل Supabase، يرجى التواصل مع دعم Miaoda الرسمي.

---

**تاريخ الإنشاء**: 2025
**الإصدار**: 1.0.0
**الحالة**: جاهز للاستخدام (مع localStorage)
